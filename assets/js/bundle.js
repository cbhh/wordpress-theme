!function(){"use strict";function e(e){return document.createElement(e)}function t(){return document.createDocumentFragment()}function n(e){return document.getElementById(e)}function i(e){return document.querySelector(e)}const a=function(){var e=/postid-(\d+)/g.exec(document.body.classList.value);if(e){var t=n("post-"+e[1]);return!(!t||"ARTICLE"!==t.tagName)}return!1}();var r,s;function l(e,t,n){for(var i=e.length,a=0;a<i;a++)e[a][t]===n&&e.splice(a,1)}r=HTMLElement.prototype,s={addClass:function(...e){this.classList.add(...e)},removeClass:function(e){this.classList.remove(e)},hasClass:function(e){return this.classList.contains(e)}},Object.keys(s).forEach((e=>{Object.defineProperty(r,e,{value:s[e],enumerable:!0})}));var o,c,d=(o=0,c=[],window.addEventListener("scroll",(function(){o||(o=setTimeout((function(){var e=window.scrollY;c.forEach((function(t){t.callback.call(t.thisArg,e)})),o=0}),50))})),{addHandle:function(e,t,n){c.every((function(t){return t.name!==e}))&&c.push({name:e,thisArg:t,callback:n})},deleteHandle:function(e){l(c,e,e)}});var h,u=function(){var e=0,t=[];return window.addEventListener("resize",(function(){e||(e=setTimeout((function(){var n=[window.innerWidth,window.innerHeight];t.forEach((function(e){e.callback.apply(e.thisArg,n)})),e=0}),100))})),{addHandle:function(e,n,i){t.every((function(t){return t.name!==e}))&&t.push({name:e,thisArg:n,callback:i})},deleteHandle:function(e){l(t,e,e)}}}();if(a){var m=(h="blockquote",document.getElementsByTagName(h));if(m&&m.length){var p=e("i"),v=e("i"),g=m.length;p.setAttribute("class","fa fa-quote-left"),v.setAttribute("class","fa fa-quote-right");for(var f=0;f<g;f++){var C=m.item(f),w=C.firstElementChild;w?C.insertBefore(f?p.cloneNode():p,w):C.appendChild(f?p.cloneNode():p),C.appendChild(f?v.cloneNode():v)}}}var b=i(".mobile-nav-icon"),E=n("primary-menu-list");if(b&&b.addEventListener("click",(function(){var e="show-mobile-nav";this.hasClass(e)?this.removeClass(e):this.addClass(e)})),E){var y=E.getElementsByClassName("menu-item-has-children"),x=y.length,I=e("i"),T=["show-children-list","clicked"];I.setAttribute("class",`fa fa-angle-left ${T[0]}`);for(var A=0;A<x;A++){var L=y.item(A),_=L.firstElementChild;A?L.insertBefore(I.cloneNode(),_):L.insertBefore(I,_)}E.addEventListener("click",(e=>{var t=e.target;"I"===t.tagName&&t.hasClass(T[0])&&(t.hasClass(T[1])?t.removeClass(T[1]):t.addClass(T[1]))}))}if(a){var H=i(".post-navigation");if(H){var k=H.querySelector(".nav-previous"),N=H.querySelector(".nav-next");if(k){var W=e("div"),M=e("i");M.setAttribute("class","fa fa-arrow-left"),W.appendChild(M),W.addEventListener("click",(()=>{window.location.href=k.querySelector("a").href})),k.insertBefore(W,k.firstElementChild)}if(N){var q=e("div"),B=e("i");B.setAttribute("class","fa fa-arrow-right"),q.appendChild(B),q.addEventListener("click",(()=>{window.location.href=N.querySelector("a").href})),N.appendChild(q)}}}for(var S=n("wp-calendar").querySelector("tbody").getElementsByTagName("td"),$=S.length,O=0;O<$;O++){var P=S.item(O);P.childElementCount&&P.addClass("has-post")}var j=window.innerHeight,F=["hidden","mousedown"],G=n("back-to-top"),R=document.documentElement,z=0;function Y(e){return String.fromCodePoint.apply(null,e)}G.addEventListener("click",(()=>{!function(e){if(z<j)window.scrollTo({top:0,behavior:"smooth"});else var t=setInterval((function(){R.scrollTop<=0&&clearInterval(t),R.scrollTop-=e}),20)}((z=R.scrollTop)/(1e3*(z/5/j)/20))})),G.addEventListener("mousedown",(()=>G.addClass(F[1]))),G.addEventListener("mouseup",(()=>G.removeClass(F[1]))),d.addHandle("bttv",null,(function(e){e>=window.innerHeight?G.removeClass(F[0]):G.addClass(F[0])}));const D=[0,1,2,3,4,5,6,7,8,9],U=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function J(e){for(var t="",n=1,i=0;i<e;i++)n?(t+=U[Math.floor(26*Math.random())],n=0):(t+=D[Math.floor(10*Math.random())],n=1);return t}function K(e,t){this.wrap=e,this.target=t,this.visible=!0}if(K.prototype={wrap:{},target:{},tagCount:[0,0,0,0,0,0],visible:!1,headingCollection:[],anchorCollection:[],_lastAnchor:null,_curAnchor:null,set currentAnchor(e){this._curAnchor=e,!this._lastAnchor||this._lastAnchor.removeClass("current"),this._curAnchor.addClass("current"),this._lastAnchor=e},get currentAnchor(){return this._curAnchor},h1(t,n){if(this.tagCount[0]>0)console.warn("Only one <h1> tag is allowed in single document");else{this.tagCount[0]+=1;var i=e("div");i.addClass("catalog-h1"),i.innerText=t.innerText,n.appendChild(i)}},h2To6(t,n,i){var a=parseInt(t.tagName.charAt(1));this.tagCount[a-1]+=1,a-i>1&&console.warn(`<h${i}> tag should not be followed directly by <h${a}> tag`);var r=e("a"),s=J(4);r.addClass("catalog-h"+a),r.innerHTML=`<div class="catalog-wrap"><div></div><span>${t.innerText}</span></div>`,t.id||(t.id=`h${a}-${this.tagCount[a-1]}-${s}`),r.href="#"+t.id,r.dataset.anchor=s,t.dataset.anchor=s,this.headingCollection.push(t),this.anchorCollection.push(r),n.appendChild(r)},generate(){if(!(!this.wrap instanceof HTMLElement||!this.target instanceof HTMLElement)){for(var e=this.wrap,n=e.children,i=e.childElementCount,a=t(),r=this.wrap.querySelector("h1")?0:1,s=0;s<i;s++){var l=n.item(s);switch(l.tagName){case"H1":this.h1(l,a),r=1;break;case"H2":case"H3":case"H4":case"H5":case"H6":this.h2To6(l,a,r),r=l.tagName.charAt(1)}}return!!a.childElementCount&&(this.target.appendChild(a),!0)}}},a){var Q=i("article"),V=e("div"),X=new K(Q.querySelector(".entry-content"),V);if(X.generate()){var Z=`<div class="sidebar-item-title">${Y([25991,31456,30446,24405])}</div>`,ee=e("div"),te=e("div");te.innerHTML=Z,V.addClass("sidebar-item-body"),ee.addClass("sidebar-item","fixed"),ee.id="post-catalog",te.appendChild(V),ee.appendChild(te),document.body.appendChild(ee);var ne=.19*window.innerWidth;ee.style.maxWidth=ne-10+"px";var ie=e("div"),ae=[Y([38544,34255,30446,24405]),Y([26174,31034,30446,24405])],re=["mousedown","hidden","catalog-status-hidden"];ie.id="post-catalog-switcher",ie.innerHTML="<i class='fa fa-th-list'></i>",ie.title=ae[0],ie.addEventListener("mousedown",(()=>{ie.addClass(re[0])})),ie.addEventListener("mouseup",(()=>{ie.removeClass(re[0])})),ie.addEventListener("click",(()=>{X.visible?(X.visible=!1,ee.addClass(re[1]),setTimeout((function(){ie.addClass(re[2]),ie.title=ae[1]}),200)):(X.visible=!0,ee.removeClass(re[1]),setTimeout((function(){ie.removeClass(re[2]),ie.title=ae[0]}),200))})),document.body.appendChild(ie),V.addEventListener("click",(e=>{var t=e.target;"A"===t.tagName?X.currentAnchor=t:"A"===t.parentElement.tagName?X.currentAnchor=t.parentElement:"A"===t.parentElement.parentElement.tagName&&(X.currentAnchor=t.parentElement.parentElement)}));const t=80;var se=X.headingCollection,le=X.anchorCollection,oe=se.length;function n(){for(var e=oe-1;e>=0;e--)if(se[e].getBoundingClientRect().top<=t){var n=se[e].dataset.anchor,i=le.find((e=>e.dataset.anchor===n));X.currentAnchor=i;break}}d.addHandle("chl",null,n)}}function ce(e,t){this.wrap=e,this.target=t}if(ce.prototype={cls:["current","pre","next",""],wrap:{},target:{},imgCollection:[],wrapCollection:[],count:0,_preWrap:null,_nextWrap:null,_curWrap:null,_lastWrap:null,_curIndex:0,_curImg:null,_visible:!1,get visible(){return this._visible},set visible(e){e?this._visible=!0:(this._visible=!1,this._curWrap.removeClass("current"),this._preWrap&&this._preWrap.removeClass("pre"),this._nextWrap&&this._nextWrap.removeClass("next"))},get currentImageIndex(){return this._curIndex},set currentImageIndex(e){e>=0&&e<this.count&&(this._curIndex=e,this._curWrap=this.wrapCollection[e],this._curWrap.setAttribute("class",this.cls[0]),e&&(this._preWrap=this.wrapCollection[e-1],this._preWrap.setAttribute("class",this.cls[1])),e<this.count-1&&(this._nextWrap=this.wrapCollection[e+1],this._nextWrap.setAttribute("class",this.cls[2])))},get currentImage(){return this._curImg},set currentImage(e){this._curImg=e;var t=e.dataset.imgLink,n=this.wrapCollection.findIndex((e=>e.dataset.imgLink===t));this.currentImageIndex=n},generate(){if(!(!this.wrap instanceof HTMLElement||!this.target instanceof HTMLElement)){var n=this.wrap.getElementsByTagName("img"),i=n.length;if(i){for(var a=t(),r=Y([22312,30011,24266,20013,26597,30475]),s=0;s<i;s++){var l=n.item(s),o=e("div"),c=e("img"),d=J(4);l.title=r,l.dataset.imgLink=d,o.dataset.imgLink=d,c.src=l.src,c.srcset=l.srcset,o.appendChild(c),this.imgCollection.push(l),this.wrapCollection.push(o),a.appendChild(o)}this.target.appendChild(a),this.count=i}}},setClass(e,t){e>=0&&e<this.count&&this.cls.includes(t)&&this.wrapCollection[e].setAttribute("class",t)}},a){var de=i(".entry-content"),he=new ce(de,n("post-imgs-collection"));if(he.generate(),he.count){var ue=n("post-img-gallery"),me=i(".gallery-close"),pe=(Ce="gallery-mover",document.getElementsByClassName(Ce)),ve=i(".current-img-index"),ge=i(".current-img-description"),fe=he.imgCollection.map((e=>{if("FIGURE"===e.parentElement.tagName){var t=e.nextElementSibling;if(t&&"FIGCAPTION"===t.tagName&&t.innerText)return t.innerText}return e.alt?e.alt:""}));de.addEventListener("click",(e=>{var t=e.target;if("IMG"===t.tagName){he.currentImage=t,he.visible=!0;var n=he.currentImageIndex;ge.innerText=fe[n],ve.innerText=n+1,ue.style.display="flex"}})),me.addEventListener("click",(()=>{he.visible=!1,ge.innerText="",ve.innerText="",ue.style.display="none"})),pe.item(1).firstElementChild.addEventListener("click",(()=>{var e=he.currentImageIndex;e<he.count-1&&(he.setClass(e-1,""),he.currentImageIndex+=1,ge.innerText=fe[e+1],ve.innerText=e+2)})),pe.item(0).firstElementChild.addEventListener("click",(()=>{var e=he.currentImageIndex;e>0&&(he.setClass(e+1,""),he.currentImageIndex-=1,ge.innerText=fe[e-1],ve.innerText=e)}))}}var Ce;if(a&&i("article").clientHeight>window.innerHeight){var we=document.documentElement.scrollHeight-window.innerHeight,be=e("div"),Ee=e("div");function t(e){be.style.setProperty("--bar-width",e/we*100+"%")}function n(e,n){we=document.documentElement.scrollHeight-n,t(window.scrollY)}be.appendChild(Ee),be.id="reading-progress-bar",document.body.appendChild(be),d.addHandle("rpbm",null,t),u.addHandle("rpba",null,n)}}();
